<!DOCTYPE html>
<html lang="zh-Hant-TW">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title></title>
		<script src="https://tw.hicdn.beanfun.com/jquery/jquery.min.js"></script>
		<script src="https://tw.hicdn.beanfun.com/jquery/jquery-migrate.min.js"></script>
		<script src="https://tw.hicdn.beanfun.com/plugins/axios/0.21.1/axios.min.js"></script>
		<style>
			* {
				padding: 0;
				margin: 0;
				box-sizing: border-box;
				font-family: Arial;
			}
			.grid {
				display: grid;
				grid-template-columns: 1fr;
			}
			.row {
				display: flex;
			}
			.col {
				width: 50%;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="app" class="pb-3 container">
			<canvas id="canvas"></canvas>
		</div>
		<script>
			function dataURItoBlob(dataURI) {
				var byteString;
				if (dataURI.split(",")[0].indexOf("base64") >= 0) byteString = atob(dataURI.split(",")[1]);
				else byteString = unescape(dataURI.split(",")[1]);

				var mimeString = dataURI.split(",")[0].split(":")[1].split(";")[0];

				var ia = new Uint8Array(byteString.length);
				for (var i = 0; i < byteString.length; i++) {
					ia[i] = byteString.charCodeAt(i);
				}

				return new Blob([ia], { type: mimeString });
			}
			var canvas = document.getElementById("canvas");
			canvas.width = 300;
			canvas.height = 300;
			var ctx = canvas.getContext("2d");
			ctx.rect(80, 80, 50, 50);
			ctx.fillStyle = "red";
			ctx.fill();
			var dataURL = canvas.toDataURL("image/png", 0.5);
			console.log(dataURL);
			console.log(dataURL.length);
			// var imageData = canvas.toDataURL("./images/FB1200.jpg");
			// var eleAppend = document.getElementById("app");

			// try {
			// 	var img = document.createElement("img");
			// 	blob = dataURItoBlob(imageData);
			// 	img.onload = function (e) {
			// 		window.URL.revokeObjectURL(img.src); // 清除释放
			// 	};
			// 	img.src = window.URL.createObjectURL(blob);
			// 	eleAppend.appendChild(img);
			// 	console.log(blob);
			// } catch (e) {
			// 	console.log(e);
			// }

			// document.getElementById("btn").addEventListener("click", function () {});
		</script>
	</body>
</html>
