<!DOCTYPE html>
<html lang="zh-Hant">
	<head>
		<title>遊戲橘子進階驗證</title>
		<meta name="description" content="遊戲橘子進階驗證" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width" />
		<!-- <meta name="viewport" content="width=1200"> -->
		<meta name="format-detection" content="telephone=no" />
		<meta name="open-default-browser" content="true" />

		<!-- 社群資訊 -->
		<meta property="og:title" content="遊戲橘子進階驗證" />
		<meta property="og:description" content="遊戲橘子進階驗證" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="" />
		<meta property="og:image" content="https://tw.hicdn.beanfun.com/beanfun/beanfun/common_assets/images/opt/f_b.jpg" />

		<!-- 外連檔案 -->
		<link rel="stylesheet" type="text/css" href="https://tw.hicdn.beanfun.com/beanfun/promo/beanfunEvent/verificationWeb/assets/style/default.css" />
		<script src="https://tw.hicdn.beanfun.com/plugins/isMobile/isMobile.min.js"></script>
		<script src="https://tw.hicdn.beanfun.com/jquery/jquery.min.js"></script>
		<script src="https://tw.hicdn.beanfun.com/jquery/jquery-migrate.min.js"></script>
		<script src="https://tw.hicdn.beanfun.com/beanfun/GamaWWW/allProducts/script/gbox/gbox.js"></script>
		<script src="https://tw.hicdn.beanfun.com/beanfun/GamaWWW/allProducts/script/game-footer.js" id="game-footer" prod="bf!遊戲" theme="dark"></script>
		<script src="https://tw.hicdn.beanfun.com/plugins/loadingProgress/loadingProgress.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vconsole@latest/dist/vconsole.min.js"></script>
	</head>
	<body>
		<form class="wrapper">
			<div class="header">
				<a href="javascript:;" class="logo"><img src="https://tw.hicdn.beanfun.com/beanfun/promo/beanfunEvent/verificationWeb/assets/image/logo-gamania.png" alt="遊戲橘子" /></a>
			</div>
			<div class="content" style="text-align: center">
				<h2>簡訊OTP驗證</h2>
				<h4>已將驗證碼發送到您的手機門號<br /><em>0988***555</em></h4>
				<br />
				<h4>請輸入簡訊OTP驗證碼</h4>
				<div class="row row-otp">
					<div class="code-group">
						<input class="input-otp a" type="tel" inputmode="numeric" autocomplete="one-time-code" maxlength="1" />
						<input class="input-otp b" type="tel" inputmode="numeric" autocomplete="one-time-code" maxlength="1" />
						<input class="input-otp c" type="tel" inputmode="numeric" autocomplete="one-time-code" maxlength="1" />
						<input class="input-otp d" type="tel" inputmode="numeric" autocomplete="one-time-code" maxlength="1" />
						<input class="input-otp e" type="tel" inputmode="numeric" autocomplete="one-time-code" maxlength="1" />
						<input class="input-otp f" type="tel" inputmode="numeric" autocomplete="one-time-code" maxlength="1" />
					</div>
					<br />
					<div class="error otp"></div>
					<br />
					<a class="btn btn-send-otp" href="javascript:;">確認</a>
					<br />
					<div class="otp-misc">
						<a class="resend disabled link-style-type2" href="javascript:;"></a>
						<a class="cant-get-otp link-style-type2" href="javascript:;">收不到驗證碼？</a>
					</div>
				</div>
			</div>
		</form>

		<script>
			/*************************** 倒數計時 ***************************/
			var vConsole = new window.VConsole();
			if ("OTPCredential" in window) {
				console.log("In");
				window.addEventListener("DOMContentLoaded", (e) => {
					const input = document.querySelector('input[autocomplete="one-time-code"]');
					if (!input) return;
					const ac = new AbortController();
					const form = input.closest("form");
					if (form) {
						console.log("Form");
						form.addEventListener("submit", (e) => {
							ac.abort();
						});
					}
					navigator.credentials
						.get({
							otp: { transport: ["sms"] },
							signal: ac.signal
						})
						.then((otp) => {
							console.log(otp);
							input.value = otp.code;
							if (form) form.submit();
						})
						.catch((err) => {
							console.error(err);
						});
				});
			} else {
				console.log("Out");
				window.addEventListener("DOMContentLoaded", (e) => {
					const input = document.querySelector('input[autocomplete="one-time-code"]');
					if (!input) return;
					const ac = new AbortController();
					const form = input.closest("form");
					if (form) {
						console.log("Form");
						form.addEventListener("submit", (e) => {
							ac.abort();
						});
					}
					if (navigator.credentials) {
						console.log("navigator.credentials In");
						console.log(ac.signal);
						navigator.credentials
							.get({
								otp: { transport: ["sms"] },
								signal: ac.signal
							})
							.then((otp) => {
								console.log(otp);
								input.value = otp.code;
								if (form) form.submit();
							})
							.catch((err) => {
								console.error("Error", err);
							});
					} else {
						console.log("No navigator.credentials");
					}
				});
			}
		</script>
	</body>
</html>
