<!DOCTYPE html>
<html lang="zh-Hant-TW">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		An image will appear here in 3 seconds:
		<script>
			navigator.serviceWorker
				.register("./sw.js")
				.then((reg) => console.log("SW registered!", reg))
				.catch((err) => console.log("Boo!", err));

			setTimeout(() => {
				const img = new Image();
				img.src = "https://images.dog.ceo/breeds/finnish-lapphund/mochilamvan.jpg";
				document.body.appendChild(img);
			}, 3000);
			function askForNotificationPermission() {
				Notification.requestPermission(function (result) {
					// 這裡result只會有兩種結果：一個是用戶允許(granted)，另一個是用戶封鎖(denied)
					console.log("User Choice", result);
					if (result !== "granted") {
						console.log("No notification permission granted!");
					} else {
						displayConfirmNotification();
					}
				});
			}

			if ("Notification" in window) {
				askForNotificationPermission();
			}
			function displayConfirmNotification() {
				var options = {
					body: "您已成功訂閱我們的推播服務!"
				};
				new Notification("成功訂閱!!", options);
			}
		</script>
	</body>
</html>
